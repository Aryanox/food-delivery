<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>10pm Snacx</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #f1f5f9; /* Lighter gray for a softer look */
        padding-bottom: 6rem;
        transition: background-color 0.3s ease, color 0.3s ease;
      }
      /* Dark Mode Styles */
      body.dark {
        background-color: #1a202c;
        color: #e2e8f0;
      }
      body.dark .bg-white {
        background-color: #2d3748;
      }
      body.dark .bg-gray-50 {
        background-color: #4a5568;
      }
      body.dark .bg-gray-100 {
        background-color: #1a202c;
      }
      body.dark .text-gray-900 {
        color: #e2e8f0;
      }
      body.dark .text-gray-800 {
        color: #edf2f7;
      }
      body.dark .text-gray-700 {
        color: #cbd5e0;
      }
      body.dark .text-gray-600 {
        color: #a0aec0;
      }
      body.dark .text-gray-500 {
        color: #a0aec0;
      }
      body.dark .border-gray-200 {
        border-color: #4a5568;
      }
      body.dark .shadow-md {
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.4),
          0 2px 4px -1px rgba(0, 0, 0, 0.2);
      }
      body.dark input,
      body.dark select {
        background-color: #4a5568;
        border-color: #718096;
        color: #e2e8f0;
      }
      body.dark .tip-option-btn {
        background-color: #4a5568;
      }
      body.dark .tip-option-btn.selected {
        background-color: #3b82f6;
        color: white;
      }

      .hidden {
        display: none;
      }
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.6);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 100;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0.3s ease;
      }
      .modal-overlay.is-visible {
        opacity: 1;
        visibility: visible;
      }
      .modal-content {
        background-color: white;
        padding: 1.5rem;
        border-radius: 1.5rem;
        max-width: 95%;
        width: 800px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        position: relative;
        max-height: 85vh;
        display: flex;
        flex-direction: column;
        transform: translateY(20px);
        transition: transform 0.3s ease;
      }
      .modal-overlay.is-visible .modal-content {
        transform: translateY(0);
      }
      .floating-cart-btn {
        position: fixed;
        bottom: 1.5rem;
        right: 1.5rem;
        width: 60px;
        height: 60px;
        background-color: #3b82f6;
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 9999px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
        transition: transform 0.2s, background-color 0.2s;
        cursor: pointer;
        z-index: 50;
      }
      .floating-cart-btn:hover {
        background-color: #2563eb;
        transform: scale(1.05);
      }
      .cart-count-badge {
        position: absolute;
        top: -5px;
        right: -5px;
        background-color: #ef4444;
        color: white;
        font-weight: bold;
        font-size: 0.75rem;
        border-radius: 9999px;
        padding: 0.125rem 0.5rem;
        opacity: 0;
        transform: scale(0);
        transition: opacity 0.2s, transform 0.2s;
      }
      .cart-count-badge.visible {
        opacity: 1;
        transform: scale(1);
      }
      .tip-option-btn {
        padding: 0.5rem 1rem;
        border-radius: 9999px;
        background-color: #e5e7eb;
        color: #4b5563;
        font-weight: 500;
        transition: background-color 0.2s, color 0.2s;
      }
      .tip-option-btn.selected {
        background-color: #3b82f6;
        color: white;
      }
      .confirmation-modal-content {
        background-color: white;
        padding: 2rem;
        border-radius: 1rem;
        width: 350px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        text-align: center;
      }
      body.dark .confirmation-modal-content {
        background-color: #2d3748;
      }
      #order-placed-modal .modal-content {
        text-align: center;
      }
      .checkmark-icon {
        font-size: 4rem;
        color: #22c55e;
        animation: bounceIn 0.8s ease-out;
      }
      @keyframes bounceIn {
        0% {
          transform: scale(0.1);
          opacity: 0;
        }
        60% {
          transform: scale(1.2);
          opacity: 1;
        }
        100% {
          transform: scale(1);
        }
      }
    </style>
  </head>
  <body class="bg-gray-100">
    <div id="main-content" class="max-w-4xl mx-auto p-4 sm:p-8">
      <header class="text-center py-8">
        <h1
          class="text-4xl sm:text-5xl font-extrabold text-gray-900 leading-tight"
        >
          10pm Snacx 🌙
        </h1>
        <p class="text-lg text-gray-600 mt-2">
          Your midnight cravings, delivered.
        </p>
      </header>

      <main id="menu-container" class="space-y-12"></main>
    </div>

    <button id="floating-cart-btn" class="floating-cart-btn">
      <i class="fas fa-shopping-cart fa-lg"></i>
      <span id="cart-count-badge" class="cart-count-badge">0</span>
    </button>

    <button
      id="theme-switcher-btn"
      class="fixed bottom-28 right-5 w-12 h-12 bg-gray-800 text-white rounded-full flex items-center justify-center shadow-lg transition-transform transform hover:scale-110 z-50"
    >
      <i class="fas fa-sun text-xl" id="theme-icon"></i>
    </button>

    <div id="cart-modal" class="modal-overlay">
      <div class="modal-content">
        <div
          class="flex justify-between items-center pb-4 border-b border-gray-200"
        >
          <h3 class="text-2xl font-bold text-gray-800">Your Order</h3>
          <button
            id="close-modal-btn"
            class="text-gray-500 hover:text-gray-700 text-3xl"
          >
            &times;
          </button>
        </div>

        <div id="cart-content" class="flex-grow overflow-y-auto mt-4">
          <div id="cart-items" class="pr-4 space-y-3"></div>

          <div id="empty-cart-message" class="hidden text-center py-16">
            <i class="fas fa-cart-plus text-5xl text-gray-300"></i>
            <p class="mt-4 text-gray-500">
              Your cart is empty. Add some snacks!
            </p>
          </div>

          <form id="order-form" class="mt-6">
            <div class="pt-4 border-t border-gray-200">
              <h4 class="font-bold text-lg mb-3 text-gray-800">
                1. Delivery Details
              </h4>
              <div class="grid grid-cols-2 gap-4">
                <div>
                  <label
                    for="floor"
                    class="block text-sm font-medium text-gray-700"
                    >Floor</label
                  >
                  <select
                    id="floor"
                    name="floor"
                    required
                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2"
                  >
                    <option value="" disabled selected>Select</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                  </select>
                </div>
                <div>
                  <label
                    for="room-no"
                    class="block text-sm font-medium text-gray-700"
                    >Room No.</label
                  >
                  <select
                    id="room-no"
                    name="room-no"
                    required
                    disabled
                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2 bg-gray-200 cursor-not-allowed"
                  >
                    <option value="" disabled selected>
                      Select floor first
                    </option>
                  </select>
                </div>
              </div>
            </div>

            <div class="mt-4 pt-4 border-t border-gray-200">
              <h4 class="font-bold text-lg mb-3 text-gray-800">
                2. Your Information
              </h4>
              <div class="space-y-3">
                <div>
                  <label
                    for="name"
                    class="block text-sm font-medium text-gray-700"
                    >Full Name</label
                  >
                  <input
                    type="text"
                    id="name"
                    name="name"
                    required
                    placeholder="e.g., Rohan Kumar"
                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2"
                  />
                </div>
                <div>
                  <label
                    for="email"
                    class="block text-sm font-medium text-gray-700"
                    >Email (for receipt)</label
                  >
                  <input
                    type="email"
                    id="email"
                    name="email"
                    required
                    placeholder="e.g., rohan@example.com"
                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2"
                  />
                </div>
                <div>
                  <label
                    for="mobile-no"
                    class="block text-sm font-medium text-gray-700"
                    >Mobile Number</label
                  >
                  <input
                    type="tel"
                    id="mobile-no"
                    name="mobile-no"
                    required
                    pattern="[6-9]{1}[0-9]{9}"
                    placeholder="10-digit number"
                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2"
                  />
                </div>
              </div>
            </div>

            <div class="mt-4 pt-4 border-t border-gray-200">
              <h4 class="font-bold text-lg mb-3 text-gray-800">
                3. Add a Tip (Optional)
              </h4>
              <div id="tip-options" class="flex flex-wrap gap-2">
                <button type="button" data-tip="5" class="tip-option-btn">
                  ₹5
                </button>
                <button type="button" data-tip="10" class="tip-option-btn">
                  ₹10
                </button>
                <button type="button" data-tip="20" class="tip-option-btn">
                  ₹20
                </button>
              </div>
            </div>
          </form>
        </div>

        <div id="modal-footer" class="pt-4 border-t border-gray-200 mt-auto">
          <div
            class="flex justify-between items-center font-bold text-xl text-gray-900"
          >
            <span>Total:</span>
            <span id="cart-total-price">₹0</span>
          </div>
          <button
            type="submit"
            form="order-form"
            id="order-now-btn"
            class="w-full bg-blue-600 text-white text-lg font-semibold py-3 mt-4 rounded-full hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"
          >
            Place Order (Cash on Delivery)
          </button>
        </div>
      </div>
    </div>

    <div id="confirmation-modal" class="modal-overlay">
      <div class="confirmation-modal-content">
        <h4 class="text-lg font-semibold text-gray-800 mb-4">Remove Item</h4>
        <p class="text-gray-600 mb-6">
          Are you sure you want to remove this item from your cart?
        </p>
        <div class="flex justify-center space-x-4">
          <button
            id="confirm-remove-btn"
            class="bg-red-500 text-white px-6 py-2 rounded-full hover:bg-red-600 transition-colors font-semibold"
          >
            Yes
          </button>
          <button
            id="cancel-remove-btn"
            class="bg-gray-300 text-gray-800 px-6 py-2 rounded-full hover:bg-gray-400 transition-colors font-semibold"
          >
            No
          </button>
        </div>
      </div>
    </div>

    <div id="order-placed-modal" class="modal-overlay">
      <div class="modal-content text-center max-w-sm">
        <i class="fas fa-check-circle checkmark-icon"></i>
        <h4 class="text-2xl font-bold text-gray-900 mt-4 mb-2">
          Order Placed!
        </h4>
        <p class="text-gray-600">
          Your delicious snack is on its way. A confirmation email has been sent
          to you.
        </p>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // --- CONFIGURATION ---
        const GOOGLE_SCRIPT_URL =
          "https://script.google.com/macros/s/AKfycbxP7WC-xI92tMkRhNulsxLZ8yG1l69TxYjn-iFSMp2VmN6lWiq23LKQziP80UMrJm_l/exec"; // <-- IMPORTANT: PASTE YOUR URL HERE

        const menuData = {
          "Snacks 🍿": [
            {
              id: "snack_maggi",
              name: "Maggi",
              description: "Classic instant noodles, spicy and delicious.",
              price: 30,
              imageUrl:
                "https://www.nestle.in/sites/g/files/pydnoa451/files/styles/brand_image/public/1_newmaggipackshot_inner2017_0.jpg.webp?itok=xAiGFxG-",
            },
            {
              id: "snack_lays",
              name: "Lays",
              description: "Crispy and light potato chips.",
              price: 20,
              imageUrl:
                "https://www.bigbasket.com/media/uploads/p/l/294273_20-lays-potato-chips-indias-magic-masala.jpg",
            },
            {
              id: "snack_kurkure",
              name: "KurKure",
              description: "Crunchy and flavorful corn puffs.",
              price: 20,
              imageUrl:
                "https://www.bigbasket.com/media/uploads/p/l/234327_13-kurkure-namkeen-masala-munch.jpg",
            },
          ],
          "Beverages 🥤": [
            {
              id: "bev_coke",
              name: "Coke",
              description: "Chilled and refreshing Coca-Cola.",
              price: 40,
              imageUrl:
                "https://www.coca-cola.com/content/dam/onexp/in/en/brands/coca-cola/coca-cola-original-taste-in-en.jpg",
            },
            {
              id: "bev_sprite",
              name: "Sprite",
              description: "Crisp and clean lemon-lime soda.",
              price: 40,
              imageUrl:
                "https://www.jiomart.com/images/product/original/491332970/sprite-750-ml-product-images-o491332970-p491332970-0-202203151833.jpg",
            },
          ],
          "Upcoming Items ✨": [
            {
              id: "up_chai",
              name: "Chai",
              description: "Warm, spiced milk tea.",
              price: 25,
              imageUrl: "https://static.toiimg.com/photo/83179532.cms",
            },
            {
              id: "up_hot_coffee",
              name: "Hot Coffee",
              description: "Freshly brewed hot coffee.",
              price: 40,
              imageUrl:
                "https://upload.wikimedia.org/wikipedia/commons/thumb/4/45/A_small_cup_of_coffee.JPG/1200px-A_small_cup_of_coffee.JPG",
            },
          ],
          "Extras 🍴": [
            {
              id: "other_platespoon",
              name: "(Plate+Spoon) Disposable",
              description: "One set of disposable plate and spoon.",
              price: 5,
              imageUrl: "https://m.media-amazon.com/images/I/61GgS4kOMDL.jpg",
            },
          ],
        };

        const allItems = Object.values(menuData).flat();
        const allItemsMap = new Map(allItems.map((item) => [item.id, item]));

        let cart = JSON.parse(localStorage.getItem("10pmSnacxCart")) || [];
        let tipAmount = 0;

        const getEl = (id) => document.getElementById(id);

        // --- UI RENDERING ---
        const createCard = (item, isUpcoming) => `
                <div class="bg-white rounded-2xl shadow-md overflow-hidden transition-transform transform hover:scale-105 ${
                  isUpcoming
                    ? "opacity-50 grayscale cursor-not-allowed"
                    : "cursor-pointer"
                }" data-item-id="${item.id}">
                    <img src="${item.imageUrl}" alt="${
          item.name
        }" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h3 class="font-bold text-xl text-gray-900">${
                          item.name
                        }</h3>
                        <p class="text-gray-600 text-sm h-10">${
                          item.description
                        }</p>
                        <div class="mt-4 flex justify-between items-center">
                            <span class="text-xl font-semibold text-gray-800">₹${
                              item.price
                            }</span>
                            ${
                              !isUpcoming
                                ? `<button data-item-id="${item.id}" class="add-to-cart-btn bg-blue-600 text-white px-5 py-2 rounded-full font-semibold hover:bg-blue-700 transition-colors text-sm">Add</button>`
                                : ""
                            }
                        </div>
                    </div>
                </div>`;

        const createCartItem = (item) => `
                <div class="cart-item flex justify-between items-center bg-gray-50 p-3 rounded-lg" data-item-id="${item.id}">
                    <div class="flex items-center gap-4">
                        <img src="${item.imageUrl}" alt="${item.name}" class="w-14 h-14 rounded-md object-cover">
                        <div>
                            <p class="font-semibold text-gray-800">${item.name}</p>
                            <p class="text-sm text-gray-500">₹${item.price}</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-3">
                        <button class="cart-qty-btn text-lg bg-gray-200 w-7 h-7 rounded-full leading-none" data-change="-1">-</button>
                        <span class="font-bold text-lg">${item.quantity}</span>
                        <button class="cart-qty-btn text-lg bg-gray-200 w-7 h-7 rounded-full leading-none" data-change="1">+</button>
                        <button class="remove-from-cart-btn text-red-500 hover:text-red-700 ml-2"><i class="fas fa-trash-alt"></i></button>
                    </div>
                </div>`;

        const renderMenu = () => {
          const menuContainer = getEl("menu-container");
          menuContainer.innerHTML = Object.keys(menuData)
            .map(
              (category) => `
                    <section>
                        <h2 class="text-3xl font-bold text-gray-800 mb-6">${category}</h2>
                        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
                            ${menuData[category]
                              .map((item) =>
                                createCard(item, category.includes("Upcoming"))
                              )
                              .join("")}
                        </div>
                    </section>
                `
            )
            .join("");
        };

        const updateCartView = () => {
          const cartItemsContainer = getEl("cart-items");
          const cartTotalPriceEl = getEl("cart-total-price");
          const emptyCartMessage = getEl("empty-cart-message");
          const orderForm = getEl("order-form");
          const modalFooter = getEl("modal-footer");
          const orderNowBtn = getEl("order-now-btn");

          if (cart.length === 0) {
            cartItemsContainer.innerHTML = "";
            emptyCartMessage.classList.remove("hidden");
            orderForm.classList.add("hidden");
            modalFooter.classList.add("hidden");
          } else {
            cartItemsContainer.innerHTML = cart.map(createCartItem).join("");
            emptyCartMessage.classList.add("hidden");
            orderForm.classList.remove("hidden");
            modalFooter.classList.remove("hidden");
          }

          const itemsTotal = cart.reduce(
            (sum, item) => sum + item.price * item.quantity,
            0
          );
          cartTotalPriceEl.textContent = `₹${itemsTotal + tipAmount}`;
          orderNowBtn.disabled = cart.length === 0;

          updateCartSummary();
          localStorage.setItem("10pmSnacxCart", JSON.stringify(cart));
        };

        const updateCartSummary = () => {
          const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
          const badge = getEl("cart-count-badge");
          badge.textContent = totalItems;
          badge.classList.toggle("visible", totalItems > 0);
        };

        // --- CART LOGIC ---
        const addToCart = (itemId) => {
          const existingItem = cart.find((cartItem) => cartItem.id === itemId);
          if (existingItem) {
            existingItem.quantity++;
          } else {
            const item = allItemsMap.get(itemId);
            cart.push({ ...item, quantity: 1 });
          }
          updateCartView();
        };

        const updateQuantity = (itemId, change) => {
          const item = cart.find((cartItem) => cartItem.id === itemId);
          if (item) {
            item.quantity += change;
            if (item.quantity <= 0) {
              cart = cart.filter((i) => i.id !== itemId);
            }
          }
          updateCartView();
        };

        const showConfirmation = (itemId) => {
          const modal = getEl("confirmation-modal");
          modal.classList.add("is-visible");

          getEl("confirm-remove-btn").onclick = () => {
            cart = cart.filter((i) => i.id !== itemId);
            updateCartView();
            modal.classList.remove("is-visible");
          };

          getEl("cancel-remove-btn").onclick = () =>
            modal.classList.remove("is-visible");
        };

        // --- EVENT LISTENERS ---
        getEl("menu-container").addEventListener("click", (e) => {
          const button = e.target.closest(".add-to-cart-btn");
          if (button) {
            addToCart(button.dataset.itemId);
          }
        });

        getEl("cart-items").addEventListener("click", (e) => {
          const itemEl = e.target.closest(".cart-item");
          if (!itemEl) return;
          const itemId = itemEl.dataset.itemId;

          if (e.target.closest(".cart-qty-btn")) {
            const change = parseInt(
              e.target.closest(".cart-qty-btn").dataset.change
            );
            updateQuantity(itemId, change);
          } else if (e.target.closest(".remove-from-cart-btn")) {
            showConfirmation(itemId);
          }
        });

        getEl("floating-cart-btn").addEventListener("click", () =>
          getEl("cart-modal").classList.add("is-visible")
        );
        getEl("close-modal-btn").addEventListener("click", () =>
          getEl("cart-modal").classList.remove("is-visible")
        );
        getEl("cart-modal").addEventListener("click", (e) => {
          if (e.target.id === "cart-modal")
            getEl("cart-modal").classList.remove("is-visible");
        });

        getEl("floor").addEventListener("change", (e) => {
          const floor = e.target.value;
          const roomSelect = getEl("room-no");
          roomSelect.innerHTML =
            '<option value="" disabled selected>Select a room</option>';

          if (floor) {
            const start = parseInt(floor) * 100 + 1;
            const end = start + 15;
            for (let i = start; i <= end; i++) {
              roomSelect.innerHTML += `<option value="${i}">${i}</option>`;
            }
            roomSelect.disabled = false;
            roomSelect.classList.remove("bg-gray-200", "cursor-not-allowed");
          } else {
            roomSelect.disabled = true;
            roomSelect.classList.add("bg-gray-200", "cursor-not-allowed");
          }
        });

        getEl("tip-options").addEventListener("click", (e) => {
          if (e.target.matches(".tip-option-btn")) {
            document
              .querySelectorAll(".tip-option-btn")
              .forEach((btn) => btn.classList.remove("selected"));
            e.target.classList.add("selected");
            tipAmount = parseInt(e.target.dataset.tip);
            updateCartView();
          }
        });

        getEl("order-form").addEventListener("submit", (e) => {
          e.preventDefault();
          const orderBtn = getEl("order-now-btn");
          orderBtn.disabled = true;
          orderBtn.innerHTML =
            '<i class="fas fa-spinner fa-spin"></i> Placing Order...';

          const formData = new FormData(e.target);
          const orderDetails = {
            customer: {
              name: formData.get("name"),
              email: formData.get("email"),
              mobile: formData.get("mobile-no"),
            },
            delivery: {
              floor: formData.get("floor"),
              room: formData.get("room-no"),
            },
            items: cart.map((i) => ({
              name: i.name,
              quantity: i.quantity,
              price: i.price,
            })),
            tip: tipAmount,
            total:
              cart.reduce((sum, item) => sum + item.price * item.quantity, 0) +
              tipAmount,
          };

          // Send data to Google Apps Script
          fetch(GOOGLE_SCRIPT_URL, {
            method: "POST",
            mode: "no-cors", // Important for simple deployment
            cache: "no-cache",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(orderDetails),
          })
            .then(() => {
              // This block will run regardless of success due to no-cors
              // So we handle UI updates optimistically
              cart = [];
              tipAmount = 0;
              document
                .querySelectorAll(".tip-option-btn")
                .forEach((btn) => btn.classList.remove("selected"));
              e.target.reset();
              getEl("room-no").disabled = true;

              updateCartView();
              getEl("cart-modal").classList.remove("is-visible");

              const placedModal = getEl("order-placed-modal");
              placedModal.classList.add("is-visible");
              setTimeout(
                () => placedModal.classList.remove("is-visible"),
                3000
              );
            })
            .catch((error) => {
              console.error("Error:", error);
              alert("There was an error placing your order. Please try again.");
            })
            .finally(() => {
              orderBtn.disabled = false;
              orderBtn.innerHTML = "Place Order (Cash on Delivery)";
            });
        });

        // --- THEME SWITCHER ---
        const themeSwitcherBtn = getEl("theme-switcher-btn");
        const themeIcon = getEl("theme-icon");
        const updateTheme = (isDark) => {
          document.body.classList.toggle("dark", isDark);
          themeIcon.classList.toggle("fa-moon", isDark);
          themeIcon.classList.toggle("fa-sun", !isDark);
          themeSwitcherBtn.style.backgroundColor = isDark
            ? "#4a5568"
            : "#3b82f6";
          localStorage.setItem("theme", isDark ? "dark" : "light");
        };
        themeSwitcherBtn.addEventListener("click", () =>
          updateTheme(!document.body.classList.contains("dark"))
        );

        // --- INITIALIZATION ---
        renderMenu();
        updateCartView();
        updateTheme(localStorage.getItem("theme") === "dark");
      });
    </script>
  </body>
</html>
